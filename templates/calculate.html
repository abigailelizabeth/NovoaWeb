{% extends 'base.html' %}
{% block title %}Flow Calculator{% endblock %}
{% block cssPath %}calculate.css{% endblock %}

{% block content %}
<div class="content">
  <h1>Flow Calculator</h1>
  <h2 class="content-subhead">Getting Started</h2>
  <p> To get started, you'll first enter the amount of departments</p>
  <div class ="getSize">

      <form method="POST" action="/generate" class="pure-form">
      <fieldset>
        <label for="size" >
        <input id="size" name="usersize" type="text" placeholder="Enter # of departments" required>
        <button type="submit" class="pure-button pure-button-primary">Generate</button>
        </label>

      </fieldset>
      </form>
  {#    <button onclick = "myFunction()" class="pure-button pure-button-primary">Generate Grid</button>#}
    </div>

    <div id="gridContainer" class="pure-g">
      {% if size %}
        <form action="/demo" method="post">
          <input name="size" hidden value="{{ size }}">
        {% for i in range(1,size+1) %}
          <div class="pure-u-1-{{ size }}">

              <select name="{{ "select" + i|string }}" id="{{ "select" + i|string }}" onChange="removeSelections({{ size }})">
                <option value="" disabled selected>Select Department</option>
                {% for j in range(1, size+1) %}
                  <option value="{{ j }}">{{ j }}</option>
                {% endfor %}
              </select>
          </div>
        {% endfor %}
              <button type="submit">GO</button>
          </form>
    </div>
      {% endif %}

</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js">
$('#results').attr("placeholder", "did i work");

$(function(){
  var allOptions = $('#select1').clone();
  alert("hi");
  $('#select1').change(function(){
  var val = $(this).val();
    alert(val);
  $('#select2').html(allOptions.filter(val));
  });
});

{#function myFunction(){#}
{##}
{#  var size = document.getElementById("size").value;#}
{##}
{#  for(var i = 1; i <= size; i++) {#}
{#    var div = document.querySelector("#grid"),#}
{#        frag = document.createDocumentFragment(),#}
{#        select = document.createElement("select");#}
{#        select.className = "gridUnit";#}
{#        select.id = "select" + i;#}
{##}
{#    for(var j=1; j<=size;j++){#}
{#      select.options.add(new Option(j, j, true, true));#}
{##}
{#    }#}
{##}
{#    frag.appendChild(select);#}
{#    div.appendChild(frag);#}
{#  }#}
{#}#}
{##}
{#$('#select1').change(function(){#}
{#  var val = $("#select1 option:selected").text();#}
{#  alert(val);#}
</script>
{% endblock %}